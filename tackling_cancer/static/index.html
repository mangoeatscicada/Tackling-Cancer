<!DOCTYPE html>
<html>

  <head>
    <title>Tackling Cancer</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Importing Bootstrap --> 
      <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

      <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

      <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      
    <!-- Importing Personal Stylesheet -->
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.6.6/jquery.fullPage.css">
       <link rel="stylesheet" href="static/stylesheets/style2.css">
       <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.8/jquery.fullPage.min.js"></script>
       <style> 

        input.gallery_demo {
            margin: 5px;
            transition: 0.10s;
        }

        input.gallery_demo:hover {
            transform: scale(1.1);
        }

       </style>
    
  </head>

  <body>

    <div id="fullpage">
        <section class="vertical-scrolling">
            <div><img src="static/images/watson-logo.png" alt="IBM's Watson" width="150em"><h2>Tackling Cancer</h2></div>
            <h3>A Watson Visual Recognition Demo</h3>
            <div class="scroll-icon">
            <p>Jump into the fun</p>
            <a href="#demos" class="icon-up-open-big"></a>
            </div>
        </section>
        <section class="vertical-scrolling">
            <h3>Select a sample biopsy image below for a demonstration</h3>
            <form action="/demobiopsy" method="POST" enctype="multipart/form-data">
                <div>
                    <input class="gallery_demo" type="image" id="image_01" src="static/images/001_biopsy.jpg" alt="Biopsy Image #01" width="200em" name="demo" value="tackling_cancer/static/images/001_biopsy.jpg">

                    <input class="gallery_demo" type="image" id="image_13" src="static/images/013_biopsy.jpg" alt="Biopsy Image #13" width="200em">
                    
                    
                    <input class="gallery_demo" type="image" id="image_15" src="static/images/015_biopsy.jpg" alt="Biopsy Image #15" width="200em">
                    
                    
                    <input class="gallery_demo" type="image" id="image_17" src="static/images/017_biopsy.jpg" alt="Biopsy Image #17" width="200em">
                    
                    
                    <input class="gallery_demo" type="image" id="image_19" src="static/images/019_biopsy.jpg" alt="Biopsy Image #19" width="200em">
                    
                </div>

            </form>
            <div class="scroll-icon">
            <p>Or upload your own</p>
            <a href="#upload" class="icon-up-open-big"></a>
            </div>
        </section>
        <section class="vertical-scrolling">
            <h3 id="selection">Select your own</h3>
            <div>
                <div class="row">
                    <div class="col-sm-4 col-sm-offset-4 text-center">
                    <div class="panel panel-info">
                        <div class="panel-heading">Individual cell or multiple cells</div>
                        <div class="panel-body">
                        <form action="/results" method="POST" enctype="multipart/form-data">
                            <!-- @hevin COPY from HERE -->
                            <div class="input-group image-preview"> <!-- Pic Upload Preview taken from https://bootsnipp.com/snippets/featured/input-file-popover-preview-image -->
                                <input type="text" placeholder=".jpg or .zip" class="form-control image-preview-filename" disabled="disabled"> 
                                <span class="input-group-btn">
                                    <!-- image-preview-clear button -->
                                    <button type="button" class="btn btn-default image-preview-clear" style="display:none;">
                                        <span class="glyphicon glyphicon-remove"></span> Clear
                                    </button>
                                    <!-- image-preview-input -->
                                    <div class="btn btn-default image-preview-input">
                                        <span class="glyphicon glyphicon-folder-open"></span>
                                        <span class="image-preview-input-title">Browse</span>
                                        <input type="file" name="file" class="file"/> 
                                    </div>
                                    <button type="submit" class="btn btn-default image-preview-submit" style="display:none;" id="submit"> Submit </button>
                                </span>
                            </div>
                        </form>
                        </div>
                    </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-4 col-sm-offset-4 text-center">
                    <div class="panel panel-info">
                        <div class="panel-heading">Biopsy classifier</div>
                        <div class="panel-body">
                        <form action="/result" method="POST" enctype="multipart/form-data">
                            <!-- full tester case-->
                            <div class="input-group image-preview-full"> <!-- Pic Upload Preview taken from https://bootsnipp.com/snippets/featured/input-file-popover-preview-image -->
                                <input type="text" placeholder=".jpg" class="form-control image-preview-filename-full" disabled="disabled"> 
                                <span class="input-group-btn">
                                    <!-- image-preview-clear button -->
                                    <button type="button" class="btn btn-default image-preview-clear-full" style="display:none;">
                                        <span class="glyphicon glyphicon-remove"></span> Clear
                                    </button>
                                    <!-- image-preview-input -->
                                    <div class="btn btn-default image-preview-input-full">
                                        <span class="glyphicon glyphicon-folder-open"></span>
                                        <span class="image-preview-input-title-full">Browse</span>
                                        <input type="file" name="file" class="file"/> 
                                    </div>
                                    <button type="submit" class="btn btn-default image-preview-submit-full" style="display:none;" id="submit"> Submit </button>
                                </span>
                            </div>
                        </form>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
            
  </body>

  <script>

    // variables
    var $header_top = $('.header-top');
    var $nav = $('nav');



    // toggle menu 
    $header_top.find('a').on('click', function() {
    $(this).parent().toggleClass('open-menu');
    });



    // fullpage customization
    $('#fullpage').fullpage({
    sectionsColor: ['#0099cc', '#ccf2ff', '#ccf2ff'],
    sectionSelector: '.vertical-scrolling',
    slideSelector: '.horizontal-scrolling',
    navigation: false,
    slidesNavigation: true,
    controlArrows: false,
    anchors: ['', 'demos', 'upload'],
    menu: '#menu',
    }); 

    // handling picture demo inputs
    $("input[id='image_001']").click(function() {
        $("input[id='file_1']").click();
    });

    // handling the manual uploads 
        $(document).on('click', '#close-preview', function(){ //The #close-preview HERE corresponds to [see below]
        $('.image-preview').popover('hide');
        // Hover befor close the preview
        $('.image-preview').hover(
            function () {
            $('.image-preview').popover('show');
            }, 
            function () {
            $('.image-preview').popover('hide');
            }
        );    
    });

    $(function() {
        // Create the close button
        var closebtn = $('<button/>', {
            type:"button",
            text: 'x',
            id: 'close-preview', // [see above] HERE
            style: 'font-size: initial;',
        });
        closebtn.attr("class","close pull-right");
        // Set the popover default content
        $('.image-preview').popover({
            trigger:'manual',
            html:true,
            title: "<strong>Preview</strong>"+$(closebtn)[0].outerHTML,
            content: "There's no image",
            placement:'bottom'
        });
        // Clear event
        $('.image-preview-clear').click(function(){
            $('.image-preview').attr("data-content","").popover('hide');
            $('.image-preview-filename').val("");
            $('.image-preview-clear').hide();
            $('.image-preview-submit').hide();
            $('.image-preview-input input:file').val("");
            $(".image-preview-input-title").text("Browse"); 
        }); 
        // Create the preview image
        $(".image-preview-input input:file").change(function (){     
            var img = $('<img/>', {
                id: 'dynamic',
                width:250,
                height:200
            });      
            var file = this.files[0];
            var reader = new FileReader();
            // Set preview image into the popover data-content
            reader.onload = function (e) {
                $(".image-preview-input-title").text("Change");
                $(".image-preview-clear").show();
                $(".image-preview-submit").show();
                $(".image-preview-filename").val(file.name);            
                img.attr('src', e.target.result);
                $(".image-preview").attr("data-content",$(img)[0].outerHTML).popover("show");
            }        
            reader.readAsDataURL(file);
        });  
    });

        $(document).on('click', '#close-preview', function(){ //The #close-preview HERE corresponds to [see below]
        $('.image-preview-full').popover('hide');
        // Hover befor close the preview
        $('.image-preview-full').hover(
            function () {
            $('.image-preview-full').popover('show');
            }, 
            function () {
            $('.image-preview-full').popover('hide');
            }
        );    
    });

    $(function() {
        // Create the close button
        var closebtn = $('<button/>', {
            type:"button",
            text: 'x',
            id: 'close-preview', // [see above] HERE
            style: 'font-size: initial;',
        });
        closebtn.attr("class","close pull-right");
        // Set the popover default content
        $('.image-preview-full').popover({
            trigger:'manual',
            html:true,
            title: "<strong>Preview</strong>"+$(closebtn)[0].outerHTML,
            content: "There's no image",
            placement:'bottom'
        });
        // Clear event
        $('.image-preview-clear-full').click(function(){
            $('.image-preview-full').attr("data-content","").popover('hide');
            $('.image-preview-filename-full').val("");
            $('.image-preview-clear-full').hide();
            $('.image-preview-submit-full').hide();
            $('.image-preview-input-full input:file').val("");
            $(".image-preview-input-title-full").text("Browse"); 
        }); 
        // Create the preview image
        $(".image-preview-input-full input:file").change(function (){     
            var img = $('<img/>', {
                id: 'dynamic',
                width:250,
                height:200
            });      
            var file = this.files[0];
            var reader = new FileReader();
            // Set preview image into the popover data-content
            reader.onload = function (e) {
                $(".image-preview-input-title-full").text("Change");
                $(".image-preview-clear-full").show();
                $(".image-preview-submit-full").show();
                $(".image-preview-filename-full").val(file.name);            
                img.attr('src', e.target.result);
                $(".image-preview-full").attr("data-content",$(img)[0].outerHTML).popover("show");
            }        
            reader.readAsDataURL(file);
        });  
    });
  </script>

</html>